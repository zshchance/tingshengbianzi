# ğŸ¤– è¯­éŸ³è¯†åˆ«æ¨¡å‹é…ç½®æŒ‡å—

æœ¬æŒ‡å—è¯¦ç»†ä»‹ç»å¦‚ä½•ä¸‹è½½ã€é…ç½®å’Œç®¡ç† Whisper è¯­éŸ³è¯†åˆ«æ¨¡å‹ï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿæ­å»ºé«˜è´¨é‡çš„è¯­éŸ³è¯†åˆ«ç¯å¢ƒã€‚

## ğŸ“‹ ç›®å½•

- [æ¨¡å‹æ¦‚è¿°](#æ¨¡å‹æ¦‚è¿°)
- [æ”¯æŒçš„æ¨¡å‹ç±»å‹](#æ”¯æŒçš„æ¨¡å‹ç±»å‹)
- [ä¸‹è½½æ–¹å¼](#ä¸‹è½½æ–¹å¼)
- [ç›®å½•ç»“æ„](#ç›®å½•ç»“æ„)
- [é…ç½®æ­¥éª¤](#é…ç½®æ­¥éª¤)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [æ€§èƒ½å¯¹æ¯”](#æ€§èƒ½å¯¹æ¯”)

## ğŸ¯ æ¨¡å‹æ¦‚è¿°

æœ¬é¡¹ç›®ä½¿ç”¨ **Whisper.cpp** ä½œä¸ºè¯­éŸ³è¯†åˆ«å¼•æ“ï¼Œæ”¯æŒå¤šç§é¢„è®­ç»ƒæ¨¡å‹ï¼š

| æ¨¡å‹åç§° | æ–‡ä»¶å¤§å° | å†…å­˜éœ€æ±‚ | é€Ÿåº¦ | ç²¾åº¦ | æ¨èåœºæ™¯ |
|---------|----------|----------|------|------|----------|
| Tiny | ~39MB | ~200MB | âš¡ æœ€å¿« | âšª åŸºç¡€ | å®æ—¶è½¬å½•ã€ä½èµ„æºè®¾å¤‡ |
| Base | ~74MB | ~400MB | ğŸš€ å¾ˆå¿« | ğŸ”µ è‰¯å¥½ | æ—¥å¸¸ä½¿ç”¨ã€å¹³è¡¡æ€§èƒ½ |
| Small | ~244MB | ~1GB | ğŸšŠ è¾ƒå¿« | ğŸŸ¢ è¾ƒå¥½ | ä¸“ä¸šåº”ç”¨ã€ä¸­ç­‰ç²¾åº¦ |
| Medium | ~769MB | ~2.5GB | ğŸ¢ ä¸­ç­‰ | ğŸŸ¢ è¾ƒå¥½ | é«˜è´¨é‡è½¬å½• |
| Large | ~1550MB | ~5GB | ğŸŒ è¾ƒæ…¢ | ğŸ”´ æœ€ä½³ | æœ€é«˜ç²¾åº¦è¦æ±‚ |

## ğŸ”§ æ”¯æŒçš„æ¨¡å‹ç±»å‹

### 1. Whisper æ¨¡å‹
- **æ ¼å¼**: `.bin` æ–‡ä»¶
- **æ¥æº**: [Whisper.cpp Model Downloads](https://huggingface.co/ggerganov/whisper.cpp)
- **æ”¯æŒè¯­è¨€**: 99+ ç§è¯­è¨€
- **åŠŸèƒ½**: è¯­éŸ³è½¬æ–‡å­—ã€æ—¶é—´æˆ³ã€å¤šè¯­è¨€è¯†åˆ«

### 2. æ¨¡å‹å˜ä½“
- **æ ‡å‡†ç‰ˆæœ¬**: `ggml-{size}.bin`
- **é‡åŒ–ç‰ˆæœ¬**: `ggml-{size}.qX_X.bin` (æ›´å°æ–‡ä»¶ï¼Œç•¥ä½ç²¾åº¦)
- **å¤šè¯­è¨€ç‰ˆæœ¬**: æ”¯æŒè‡ªåŠ¨è¯­è¨€æ£€æµ‹

## â¬‡ï¸ ä¸‹è½½æ–¹å¼

### æ–¹å¼ä¸€ï¼šæ‰‹åŠ¨ä¸‹è½½ï¼ˆæ¨èï¼‰

1. **è®¿é—® Hugging Face**ï¼š
   ```
   https://huggingface.co/ggerganov/whisper.cpp
   ```

2. **é€‰æ‹©åˆé€‚çš„æ¨¡å‹**ï¼š
   - åˆå­¦è€…æ¨èï¼š`ggml-base.bin`
   - é«˜ç²¾åº¦éœ€æ±‚ï¼š`ggml-large-v3.bin`
   - èµ„æºå—é™ï¼š`ggml-tiny.bin`

3. **ä¸‹è½½å‘½ä»¤ç¤ºä¾‹**ï¼š
   ```bash
   # ä¸‹è½½ Base æ¨¡å‹ï¼ˆæ¨èåˆå­¦è€…ï¼‰
   curl -L https://huggingface.co/ggerganov/whisper.cpp/resolve/main/ggml-base.bin -o models/ggml-base.bin

   # ä¸‹è½½ Large v3 æ¨¡å‹ï¼ˆæœ€é«˜ç²¾åº¦ï¼‰
   curl -L https://huggingface.co/ggerganov/whisper.cpp/resolve/main/ggml-large-v3.bin -o models/ggml-large-v3.bin

   # ä¸‹è½½ Tiny æ¨¡å‹ï¼ˆæœ€å°ä½“ç§¯ï¼‰
   curl -L https://huggingface.co/ggerganov/whisper.cpp/resolve/main/ggml-tiny.bin -o models/ggml-tiny.bin
   ```

### æ–¹å¼äºŒï¼šä½¿ç”¨è„šæœ¬ä¸‹è½½

```bash
# è¿›å…¥é¡¹ç›®æ ¹ç›®å½•
cd /path/to/audio-recognizer

# è¿è¡Œä¸‹è½½è„šæœ¬
./scripts/download-models.sh

# æˆ–è€…æ‰‹åŠ¨é€‰æ‹©æ¨¡å‹
mkdir -p models/whisper
cd models/whisper

# ä¸‹è½½ä¸åŒå¤§å°çš„æ¨¡å‹
wget https://huggingface.co/ggerganov/whisper.cpp/resolve/main/ggml-base.bin
wget https://huggingface.co/ggerganov/whisper.cpp/resolve/main/ggml-small.bin
```

### æ–¹å¼ä¸‰ï¼šåº”ç”¨å†…é…ç½®

1. æ‰“å¼€åº”ç”¨è®¾ç½® â†’ é«˜çº§è®¾ç½® â†’ æ¨¡å‹è®¾ç½®
2. ç‚¹å‡»"æµè§ˆ"æŒ‰é’®é€‰æ‹©æ¨¡å‹æ–‡ä»¶å¤¹
3. åº”ç”¨ä¼šè‡ªåŠ¨æ£€æµ‹å’ŒéªŒè¯æ¨¡å‹æ–‡ä»¶
4. ç‚¹å‡»"æ£€æŸ¥æ¨¡å‹"ç¡®è®¤é…ç½®æ­£ç¡®

## ğŸ“ ç›®å½•ç»“æ„

### æ¨èçš„ç›®å½•ç»“æ„ï¼š

```
audio-recognizer/
â”œâ”€â”€ models/                    # æ¨¡å‹æ ¹ç›®å½•
â”‚   â”œâ”€â”€ whisper/              # Whisper æ¨¡å‹å­ç›®å½•
â”‚   â”‚   â”œâ”€â”€ ggml-base.bin     # åŸºç¡€æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ ggml-small.bin    # å°å‹æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ ggml-medium.bin   # ä¸­å‹æ¨¡å‹
â”‚   â”‚   â””â”€â”€ ggml-large.bin    # å¤§å‹æ¨¡å‹
â”‚   â””â”€â”€ README.md             # æ¨¡å‹è¯´æ˜æ–‡ä»¶
â”œâ”€â”€ frontend/                 # å‰ç«¯ä»£ç 
â”œâ”€â”€ backend/                  # åç«¯ä»£ç 
â””â”€â”€ app.go                    # ä¸»åº”ç”¨
```

### æ›¿ä»£ç»“æ„ï¼š

```
models/
â”œâ”€â”€ ggml-base.bin             # ç›´æ¥æ”¾åœ¨æ ¹ç›®å½•
â”œâ”€â”€ ggml-tiny.bin
â””â”€â”€ custom-models/
    â””â”€â”€ your-model.bin
```

## âš™ï¸ é…ç½®æ­¥éª¤

### æ­¥éª¤ 1ï¼šä¸‹è½½æ¨¡å‹

```bash
# åˆ›å»ºæ¨¡å‹ç›®å½•
mkdir -p models/whisper

# ä¸‹è½½ Base æ¨¡å‹ï¼ˆæ¨èï¼‰
cd models/whisper
curl -L https://huggingface.co/ggerganov/whisper.cpp/resolve/main/ggml-base.bin -o ggml-base.bin
```

### æ­¥éª¤ 2ï¼šé…ç½®åº”ç”¨è·¯å¾„

1. **å¯åŠ¨åº”ç”¨**
2. **æ‰“å¼€è®¾ç½®**: ç‚¹å‡»å³ä¸Šè§’"è®¾ç½®"æŒ‰é’®
3. **é«˜çº§è®¾ç½®**: ç‚¹å‡»"æ˜¾ç¤ºé«˜çº§è®¾ç½®"
4. **æ¨¡å‹è®¾ç½®**: åœ¨"ğŸ¤– æ¨¡å‹è®¾ç½®"éƒ¨åˆ†
5. **è®¾ç½®è·¯å¾„**:
   - æ‰‹åŠ¨è¾“å…¥è·¯å¾„ï¼Œå¦‚ï¼š`./models`
   - æˆ–ç‚¹å‡»"æµè§ˆ"é€‰æ‹©æ–‡ä»¶å¤¹

### æ­¥éª¤ 3ï¼šéªŒè¯æ¨¡å‹

1. **è‡ªåŠ¨æ£€æµ‹**: åº”ç”¨ä¼šè‡ªåŠ¨æ‰«æé€‰æ‹©çš„ç›®å½•
2. **çŠ¶æ€æ˜¾ç¤º**: æŸ¥çœ‹æ¨¡å‹çŠ¶æ€ï¼ˆâœ…å·²é…ç½® / âš ï¸éœ€è¦é…ç½®ï¼‰
3. **è¯¦ç»†ä¿¡æ¯**: æ˜¾ç¤ºæ£€æµ‹åˆ°çš„æ¨¡å‹æ–‡ä»¶å’Œå¤§å°
4. **æµ‹è¯•è¿è¡Œ**: å°è¯•è¯†åˆ«ä¸€ä¸ªéŸ³é¢‘æ–‡ä»¶éªŒè¯é…ç½®

### æ­¥éª¤ 4ï¼šå¼€å§‹ä½¿ç”¨

é…ç½®å®Œæˆåï¼Œæ‚¨å¯ä»¥ï¼š
- é€‰æ‹©éŸ³é¢‘æ–‡ä»¶è¿›è¡Œè¯†åˆ«
- è°ƒæ•´è¯†åˆ«è¯­è¨€å’Œå…¶ä»–è®¾ç½®
- å¯¼å‡ºè¯†åˆ«ç»“æœä¸ºå„ç§æ ¼å¼

## ğŸ” å¸¸è§é—®é¢˜

### Q: æ¨¡å‹ä¸‹è½½å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**A**: å°è¯•ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š
```bash
# ä½¿ç”¨ä¸åŒçš„ä¸‹è½½å·¥å…·
wget https://huggingface.co/ggerganov/whisper.cpp/resolve/main/ggml-base.bin

# æˆ–ä½¿ç”¨ä»£ç†
curl -L --proxy http://your-proxy:port [æ¨¡å‹URL]

# æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œé˜²ç«å¢™è®¾ç½®
```

### Q: è¯†åˆ«ç²¾åº¦ä¸é«˜ï¼Ÿ

**A**: è€ƒè™‘ä»¥ä¸‹ä¼˜åŒ–ï¼š
1. **å‡çº§æ¨¡å‹**: ä½¿ç”¨ Large æˆ– Medium æ¨¡å‹æ›¿ä»£ Base
2. **éŸ³é¢‘è´¨é‡**: ç¡®ä¿è¾“å…¥éŸ³é¢‘æ¸…æ™°ã€æ— å™ªéŸ³
3. **è¯­è¨€è®¾ç½®**: æ­£ç¡®è®¾ç½®è¯†åˆ«è¯­è¨€
4. **å‚æ•°è°ƒæ•´**: å¯ç”¨è¯æ±‡çº§æ—¶é—´æˆ³å’Œç½®ä¿¡åº¦é˜ˆå€¼

### Q: è¯†åˆ«é€Ÿåº¦å¤ªæ…¢ï¼Ÿ

**A**: ä¼˜åŒ–å»ºè®®ï¼š
1. **é™çº§æ¨¡å‹**: ä½¿ç”¨ Small æˆ– Base æ¨¡å‹
2. **éŸ³é¢‘åˆ†æ®µ**: å°†é•¿éŸ³é¢‘åˆ†å‰²æˆå°æ®µå¤„ç†
3. **ç¡¬ä»¶åŠ é€Ÿ**: ç¡®ä¿ä½¿ç”¨ GPU ç‰ˆæœ¬ï¼ˆå¦‚æœæ”¯æŒï¼‰
4. **é™ä½é‡‡æ ·ç‡**: ä½¿ç”¨ 16kHz é‡‡æ ·ç‡

### Q: æ¨¡å‹æ–‡ä»¶æŸåï¼Ÿ

**A**: è§£å†³æ–¹æ¡ˆï¼š
```bash
# æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§
ls -la models/whisper/
file models/whisper/ggml-base.bin

# é‡æ–°ä¸‹è½½
rm models/whisper/ggml-base.bin
curl -L [æ¨¡å‹URL] -o models/whisper/ggml-base.bin

# éªŒè¯æ–‡ä»¶å¤§å°åº”è¯¥çº¦ä¸º 74MB
```

### Q: å†…å­˜ä¸è¶³ï¼Ÿ

**A**: è§£å†³æ–¹æ¡ˆï¼š
1. **ä½¿ç”¨å°æ¨¡å‹**: Tiny æˆ– Base æ¨¡å‹
2. **é‡åŒ–æ¨¡å‹**: å¯»æ‰¾ `.qX_X.bin` æ ¼å¼çš„é‡åŒ–ç‰ˆæœ¬
3. **åˆ†æ®µå¤„ç†**: å°†é•¿éŸ³é¢‘åˆ†æˆå°æ®µ
4. **å…³é—­å…¶ä»–åº”ç”¨**: é‡Šæ”¾ç³»ç»Ÿå†…å­˜

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

### æ¨¡å‹æ€§èƒ½æ•°æ®

| æ¨¡å‹ | æ–‡ä»¶å¤§å° | RAMä½¿ç”¨ | é€Ÿåº¦(å®æ—¶å€) | WER(%) |
|------|----------|---------|--------------|--------|
| Tiny | 39MB | 200MB | 32x | 12.1 |
| Base | 74MB | 400MB | 16x | 8.8 |
| Small | 244MB | 1GB | 6x | 6.2 |
| Medium | 769MB | 2.5GB | 2x | 4.8 |
| Large-v3 | 1550MB | 5GB | 1x | 4.2 |

**è¯´æ˜**:
- **WER**: è¯é”™è¯¯ç‡ï¼Œè¶Šä½è¶Šå¥½
- **é€Ÿåº¦**: ç›¸å¯¹äºå®æ—¶éŸ³é¢‘çš„å€ç‡ï¼Œè¶Šå¤§è¶Šå¿«
- **æ¨è**: Base æ¨¡å‹åœ¨é€Ÿåº¦å’Œç²¾åº¦é—´å–å¾—æœ€ä½³å¹³è¡¡

### ç¡¬ä»¶è¦æ±‚

| é…ç½®ç­‰çº§ | CPU | å†…å­˜ | å­˜å‚¨ | æ¨èæ¨¡å‹ |
|----------|-----|------|------|----------|
| æœ€ä½é…ç½® | 2æ ¸ | 4GB | 1GB | Tiny |
| åŸºç¡€é…ç½® | 4æ ¸ | 8GB | 2GB | Base |
| æ ‡å‡†é…ç½® | 8æ ¸ | 16GB | 4GB | Small/Medium |
| é«˜çº§é…ç½® | 16æ ¸+ | 32GB+ | 8GB+ | Large |

## ğŸ”§ é«˜çº§é…ç½®

### ç¯å¢ƒå˜é‡é…ç½®

```bash
# è®¾ç½®æ¨¡å‹æ ¹ç›®å½•
export WHISPER_MODEL_PATH="/path/to/models"

# è®¾ç½®é»˜è®¤è¯­è¨€
export WHISPER_LANGUAGE="zh-CN"

# è®¾ç½®çº¿ç¨‹æ•°
export WHISPER_THREADS="4"
```

### æ‰¹é‡ä¸‹è½½è„šæœ¬

```bash
#!/bin/bash
# download-all-models.sh

MODELS=(
    "ggml-tiny.bin"
    "ggml-base.bin"
    "ggml-small.bin"
    "ggml-medium.bin"
    "ggml-large-v3.bin"
)

BASE_URL="https://huggingface.co/ggerganov/whisper.cpp/resolve/main"
MODEL_DIR="models/whisper"

mkdir -p "$MODEL_DIR"

for model in "${MODELS[@]}"; do
    echo "ä¸‹è½½ $model..."
    curl -L "$BASE_URL/$model" -o "$MODEL_DIR/$model"
    echo "âœ… $model ä¸‹è½½å®Œæˆ"
done

echo "ğŸ‰ æ‰€æœ‰æ¨¡å‹ä¸‹è½½å®Œæˆï¼"
```

### æ¨¡å‹éªŒè¯è„šæœ¬

```bash
#!/bin/bash
# verify-models.sh

MODEL_DIR="models/whisper"
EXPECTED_SIZES=(
    "ggml-tiny.bin:39000000"
    "ggml-base.bin:74000000"
    "ggml-small.bin:244000000"
    "ggml-medium.bin:769000000"
    "ggml-large-v3.bin:1550000000"
)

echo "ğŸ” éªŒè¯æ¨¡å‹æ–‡ä»¶..."

for model_info in "${EXPECTED_SIZES[@]}"; do
    model=$(echo $model_info | cut -d: -f1)
    expected_size=$(echo $model_info | cut -d: -f2)

    if [ -f "$MODEL_DIR/$model" ]; then
        actual_size=$(stat -f%z "$MODEL_DIR/$model" 2>/dev/null || stat -c%s "$MODEL_DIR/$model" 2>/dev/null)
        if [ "$actual_size" -gt "$((expected_size / 2))" ]; then
            echo "âœ… $model æ–‡ä»¶æ­£å¸¸"
        else
            echo "âŒ $model æ–‡ä»¶å¯èƒ½æŸåæˆ–ä¸å®Œæ•´"
        fi
    else
        echo "âš ï¸ $model æ–‡ä»¶ä¸å­˜åœ¨"
    fi
done
```

## ğŸ“š æ›´å¤šèµ„æº

- [Whisper.cpp å®˜æ–¹æ–‡æ¡£](https://github.com/ggerganov/whisper.cpp)
- [OpenAI Whisper æ¨¡å‹å¡ç‰‡](https://github.com/openai/whisper)
- [Hugging Face æ¨¡å‹åº“](https://huggingface.co/models)
- [è¯­éŸ³è¯†åˆ«æœ€ä½³å®è·µ](https://github.com/ggerganov/whisper.cpp/wiki)

---

## ğŸ’¡ æç¤º

- **åˆæ¬¡ä½¿ç”¨**: å»ºè®®ä» `ggml-base.bin` å¼€å§‹
- **ç£ç›˜ç©ºé—´**: ç¡®ä¿è‡³å°‘æœ‰ 2GB å¯ç”¨ç©ºé—´ç”¨äºæ¨¡å‹æ–‡ä»¶
- **ç½‘ç»œä¸‹è½½**: å¤§å‹æ¨¡å‹æ–‡ä»¶ä¸‹è½½å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´
- **å®šæœŸæ›´æ–°**: å…³æ³¨ Whisper.cpp æ›´æ–°ï¼Œè·å–æœ€æ–°æ¨¡å‹
- **å¤‡ä»½æ¨¡å‹**: å°†ä¸‹è½½çš„æ¨¡å‹æ–‡ä»¶å¤‡ä»½åˆ°å®‰å…¨ä½ç½®

å¦‚æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·æŸ¥çœ‹åº”ç”¨å†…å¸®åŠ©æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚