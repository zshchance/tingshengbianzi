<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>听声辨字 - 智能音频识别工具</title>
    <link rel="stylesheet" href="./src/style.css">
    <link rel="stylesheet" href="./src/app.css">
</head>
<body>
<div id="app">
    <!-- 应用主界面 -->
    <div class="app-container">
        <!-- 顶部标题栏 -->
        <header class="app-header">
            <div class="header-content">
                <div class="app-title">
                    <h1>🎵 听声辨字</h1>
                    <p class="subtitle">智能音频识别工具</p>
                </div>
                <div class="header-actions">
                    <button id="aboutBtn" class="btn btn-secondary" title="关于">
                        ℹ️ 关于
                    </button>
                    <button id="settingsBtn" class="btn btn-secondary" title="设置">
                        ⚙️ 设置
                    </button>
                </div>
            </div>
        </header>

        <!-- 主要内容区域 -->
        <main class="app-main">
            <!-- 文件选择区域 -->
            <section class="file-section">
                <div class="file-drop-zone" id="fileDropZone">
                    <div class="drop-content">
                        <div class="drop-icon">📁</div>
                        <h3>选择音频文件</h3>
                        <p>拖拽音频文件到此处，或点击选择文件</p>
                        <button id="selectFileBtn" class="btn btn-primary">
                            📂 选择文件
                        </button>
                    </div>
                    <input type="file" id="fileInput" accept="audio/*" style="display: none;">
                </div>

                <!-- 当前文件信息 -->
                <div class="file-info" id="fileInfo" style="display: none;">
                    <div class="info-header">
                        <h4>📄 当前文件</h4>
                        <button id="clearFileBtn" class="btn btn-small btn-secondary">✕</button>
                    </div>
                    <div class="info-content">
                        <div class="file-name" id="fileName">--</div>
                        <div class="file-details">
                            <span id="fileDuration">时长: --</span>
                            <span id="fileSize">大小: --</span>
                            <span id="fileFormat">格式: --</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 识别设置区域 -->
            <section class="settings-section">
                <div class="settings-header">
                    <h3>⚙️ 识别设置</h3>
                    <button id="toggleAdvancedBtn" class="btn btn-small btn-secondary">
                        <span id="advancedToggleText">显示高级设置</span>
                        <span id="advancedToggleIcon">▼</span>
                    </button>
                </div>

                <!-- 基础设置 -->
                <div class="basic-settings">
                    <div class="setting-row">
                        <label for="languageSelect">识别语言:</label>
                        <select id="languageSelect" class="select-input">
                            <option value="zh-CN">中文</option>
                            <option value="en-US">English</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="modelSelect">识别模型:</label>
                        <select id="modelSelect" class="select-input">
                            <option value="default">默认模型</option>
                        </select>
                    </div>
                </div>

                <!-- 高级设置（默认隐藏） -->
                <div class="advanced-settings" id="advancedSettings" style="display: none;">
                    <div class="setting-group">
                        <h4>音频处理</h4>
                        <div class="setting-row">
                            <label>
                                <input type="checkbox" id="enableNormalization" checked>
                                启用音频标准化
                            </label>
                        </div>
                        <div class="setting-row">
                            <label>
                                <input type="checkbox" id="enableNoiseReduction">
                                启用降噪处理
                            </label>
                        </div>
                        <div class="setting-row">
                            <label for="sampleRateSelect">采样率:</label>
                            <select id="sampleRateSelect" class="select-input">
                                <option value="16000" selected>16000 Hz</option>
                                <option value="22050">22050 Hz</option>
                                <option value="44100">44100 Hz</option>
                            </select>
                        </div>
                    </div>

                    <div class="setting-group">
                        <h4>识别选项</h4>
                        <div class="setting-row">
                            <label>
                                <input type="checkbox" id="enableWordTimestamp" checked>
                                启用词汇级时间戳
                            </label>
                        </div>
                        <div class="setting-row">
                            <label for="confidenceThreshold">置信度阈值:</label>
                            <input type="range" id="confidenceThreshold" min="0" max="1" step="0.1" value="0.5" class="range-input">
                            <span id="confidenceValue">0.5</span>
                        </div>
                    </div>

                    <div class="setting-group">
                        <h4>模型目录</h4>
                        <div class="setting-row">
                            <input type="text" id="modelPath" value="./models" class="text-input" readonly>
                            <button id="browseModelBtn" class="btn btn-small btn-secondary">浏览</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 控制按钮区域 -->
            <section class="control-section">
                <div class="control-buttons">
                    <button id="startBtn" class="btn btn-primary btn-large" disabled>
                        🎤 开始识别
                    </button>
                    <button id="stopBtn" class="btn btn-danger btn-large" disabled>
                        ⏹️ 停止识别
                    </button>
                    <button id="resetBtn" class="btn btn-secondary btn-large">
                        🔄 重置
                    </button>
                </div>
            </section>

            <!-- 进度显示区域 -->
            <section class="progress-section" id="progressSection" style="display: none;">
                <div class="progress-header">
                    <h4>📊 识别进度</h4>
                    <span id="progressStatus">准备中...</span>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progressBar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text">
                        <span id="progressPercent">0%</span>
                        <span id="progressTime">00:00</span>
                    </div>
                </div>
                <div class="progress-details">
                    <span id="processedTime">已处理: 00:00</span>
                    <span id="remainingTime">剩余: 00:00</span>
                </div>
            </section>

            <!-- 结果显示区域 -->
            <section class="result-section" id="resultSection" style="display: none;">
                <div class="result-header">
                    <div class="result-tabs">
                        <button class="tab-btn active" data-tab="original">📄 原始结果</button>
                        <button class="tab-btn" data-tab="ai">✨ AI优化</button>
                        <button class="tab-btn" data-tab="subtitle">🎵 字幕模式</button>
                    </div>
                    <div class="result-actions">
                        <button id="copyOriginalBtn" class="btn btn-small btn-secondary">📋 复制原始</button>
                        <button id="copyAIBtn" class="btn btn-small btn-secondary">✨ 复制AI提示</button>
                        <button id="exportBtn" class="btn btn-small btn-primary">💾 导出文件</button>
                    </div>
                </div>

                <div class="result-content">
                    <div class="result-display" id="resultDisplay">
                        <div class="result-placeholder">
                            <div class="placeholder-icon">📝</div>
                            <p>等待识别结果...</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- 底部状态栏 -->
        <footer class="app-footer">
            <div class="status-left">
                <span id="appStatus">就绪</span>
            </div>
            <div class="status-right">
                <span id="modelStatus">模型: 未加载</span>
                <span id="versionInfo">v1.0.0</span>
            </div>
        </footer>
    </div>

    <!-- 设置弹窗 -->
    <div class="modal-overlay" id="settingsModal" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>⚙️ 应用设置</h3>
                <button class="modal-close" id="closeModalBtn">✕</button>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <h4>界面设置</h4>
                    <div class="setting-row">
                        <label for="themeSelect">主题:</label>
                        <select id="themeSelect" class="select-input">
                            <option value="light">浅色</option>
                            <option value="dark">深色</option>
                            <option value="auto">跟随系统</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="languageUISelect">界面语言:</label>
                        <select id="languageUISelect" class="select-input">
                            <option value="zh-CN">中文</option>
                            <option value="en-US">English</option>
                        </select>
                    </div>
                </div>

                <div class="setting-group">
                    <h4>导出设置</h4>
                    <div class="setting-row">
                        <label for="defaultFormatSelect">默认格式:</label>
                        <select id="defaultFormatSelect" class="select-input">
                            <option value="txt">纯文本</option>
                            <option value="srt">SRT字幕</option>
                            <option value="vtt">WebVTT</option>
                            <option value="json">JSON</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label>
                            <input type="checkbox" id="autoSaveResults" checked>
                            自动保存识别结果
                        </label>
                    </div>
                </div>

                <div class="setting-group">
                    <h4>AI优化</h4>
                    <div class="setting-row">
                        <label>
                            <input type="checkbox" id="enableAIOptimization" checked>
                            启用AI文本优化
                        </label>
                    </div>
                    <div class="setting-row">
                        <label for="aiTemplateSelect">优化模板:</label>
                        <select id="aiTemplateSelect" class="select-input">
                            <option value="basic">基础优化</option>
                            <option value="detailed">详细优化</option>
                            <option value="subtitle">字幕优化</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="saveSettingsBtn" class="btn btn-primary">保存设置</button>
                <button id="cancelSettingsBtn" class="btn btn-secondary">取消</button>
            </div>
        </div>
    </div>

    <!-- 关于弹窗 -->
    <div class="modal-overlay" id="aboutModal" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>ℹ️ 关于听声辨字</h3>
                <button class="modal-close" id="closeAboutModalBtn">✕</button>
            </div>
            <div class="modal-body">
                <div class="about-content">
                    <div class="about-header">
                        <h2>🎵 听声辨字</h2>
                        <p class="version">版本 1.0.0</p>
                        <p class="description">智能音频识别工具 - 软件免费，严禁不良商家贩卖获利</p>
                    </div>

                    <div class="about-section">
                        <h4>🚀 主要功能</h4>
                        <ul>
                            <li>支持多种音频格式（MP3、WAV、M4A、AAC等）</li>
                            <li>基于Whisper引擎的高精度语音识别</li>
                            <li>支持中英文等多种语言识别</li>
                            <li>AI智能文本优化</li>
                            <li>多种导出格式（TXT、SRT、VTT、JSON）</li>
                            <li>实时识别进度显示</li>
                        </ul>
                    </div>

                    <div class="about-section">
                        <h4>💻 技术栈</h4>
                        <ul>
                            <li>前端：Vue.js 3 + Vite</li>
                            <li>后端：Go + Wails v2.11.0</li>
                            <li>语音识别：Whisper.cpp</li>
                            <li>音频处理：FFmpeg</li>
                        </ul>
                    </div>

                    <div class="about-section">
                        <h4>📧 联系信息</h4>
                        <div class="contact-info">
                            <p><strong>作者：</strong>这家伙很懒</p>
                            <p><strong>邮箱：</strong><a href="mailto:zshchance@qq.com">zshchance@qq.com</a></p>
                            <p><strong>网站：</strong><a href="https://administrator.wiki" target="_blank">administrator.wiki</a></p>
                        </div>
                    </div>

                    <div class="about-section">
                        <h4>⚠️ 免费声明</h4>
                        <div class="disclaimer">
                            <p>本软件完全免费，仅供学习和个人使用。</p>
                            <p>严禁任何商家或个人将本软件用于商业贩卖或获利。</p>
                            <p>如遇收费情况，均为诈骗行为，请及时举报。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="closeAboutBtn" class="btn btn-primary">确定</button>
            </div>
        </div>
    </div>

    <!-- 提示消息 -->
    <div class="toast-container" id="toastContainer"></div>
</div>

<script src="./src/main-vue.js" type="module"></script>
</body>
</html>
